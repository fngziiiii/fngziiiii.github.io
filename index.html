<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏´‡∏ß‡∏¢ 00‚Äì99</title>
<style>
body { font-family:sans-serif; background:#f4f4f4; padding:20px }
.grid { display:grid; grid-template-columns: repeat(5, 1fr); gap:10px }

.card {
  background:#fff;
  padding:10px;
  border-radius:8px;
  font-size:14px;
}

.number {
  font-size:20px;
  font-weight:bold;
  text-align:center;
}

.available { background:#c8e6c9 }
.unpaid { background:#fff59d }
.paid { background:#ef9a9a }

input[type="text"] {
  width:100%;
  padding:5px;
  margin-top:5px;
}

button {
  margin:5px 5px 10px 0;
  padding:8px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

#result {
  background:#fff;
  padding:15px;
  border-radius:8px;
  margin-bottom:15px;
}
</style>
</head>

<body>

<h2>üéü ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏´‡∏ß‡∏¢ 00‚Äì99</h2>

<button onclick="showTotal()">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</button>
<button onclick="showUnpaidByPerson()">üë§ ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Ñ‡∏ô (‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢)</button>

<div id="result"></div>

<div class="grid" id="grid"></div>

<script>
const PRICE = 50;
let data = JSON.parse(localStorage.getItem("lottery")) || {};
const grid = document.getElementById("grid");
const result = document.getElementById("result");

function render() {
  grid.innerHTML = "";

  for (let i = 0; i < 100; i++) {
    const num = i.toString().padStart(2,"0");
    const d = data[num] || {};

    const card = document.createElement("div");
    card.className = "card";

    if (!data[num]) card.classList.add("available");
    else if (d.paid) card.classList.add("paid");
    else card.classList.add("unpaid");

    card.innerHTML = `
      <div class="number">${num}</div>
      <input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠"
        value="${d.name || ""}"
        ${d.name ? "disabled" : ""}
        onchange="save('${num}', this.value)">
      <label>
        <input type="checkbox"
          ${d.paid ? "checked" : ""}
          ${!d.name ? "disabled" : ""}
          onchange="setPaid('${num}', this.checked)">
        ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß
      </label>
    `;
    grid.appendChild(card);
  }
}

function save(num, name) {
  if (!name) return;
  data[num] = { name, paid:false };
  localStorage.setItem("lottery", JSON.stringify(data));
  render();
}

function setPaid(num, paid) {
  data[num].paid = paid;
  localStorage.setItem("lottery", JSON.stringify(data));
  render();
}

function showTotal() {
  let sold = 0, paid = 0;
  Object.values(data).forEach(d => {
    sold++;
    if (d.paid) paid++;
  });

  result.innerHTML = `
    <h3>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</h3>
    ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß: ${sold} ‡πÄ‡∏•‡∏Ç<br>
    ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß: ${paid} ‡πÄ‡∏•‡∏Ç = ${paid * PRICE} ‡∏ö‡∏≤‡∏ó<br>
    ‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢: ${sold - paid} ‡πÄ‡∏•‡∏Ç = ${(sold - paid) * PRICE} ‡∏ö‡∏≤‡∏ó
  `;
}

function showUnpaidByPerson() {
  let people = {};

  for (let num in data) {
    const d = data[num];
    if (!d.paid) {
      if (!people[d.name]) people[d.name] = [];
      people[d.name].push(num);
    }
  }

  let html = "<h3>üë§ ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Ñ‡∏ô (‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢)</h3>";

  if (Object.keys(people).length === 0) {
    html += "üéâ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢";
  } else {
    for (let name in people) {
      const count = people[name].length;
      html += `
        <b>${name}</b><br>
        ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡πà‡∏≤‡∏¢: ${people[name].join(", ")}<br>
        ‡∏£‡∏ß‡∏° ${count} ‡πÄ‡∏•‡∏Ç = ${count * PRICE} ‡∏ö‡∏≤‡∏ó<br><br>
      `;
    }
  }

  result.innerHTML = html;
}

render();
</script>

</body>
</html>
