<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏•‡∏Ç 00-99 </title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600&display=swap" rel="stylesheet">

<style>
body{background:#f0f2f5;font-family:'Sarabun',sans-serif;padding-bottom:80px}
.container{max-width:600px}
.stat-card{background:#fff;border-radius:15px;padding:15px;text-align:center;box-shadow:0 2px 10px rgba(0,0,0,.05)}
.ticket-item{background:#fff;border-radius:12px;margin-bottom:10px;padding:15px;border-left:6px solid #e9ecef}
.status-free{border-left-color:#ced4da}
.status-pending{border-left-color:#ffc107;background:#fffbf0}
.status-paid{border-left-color:#198754;background:#f0f9f4}
.lotto-num{font-size:1.6rem;font-weight:800;letter-spacing:2px}
</style>
</head>

<body>
<div class="container mt-4">

<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <small class="text-muted" style="font-size:12px">‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏•‡∏Ç (‡∏Ç‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç 00‚Äì99)</small>
    <h5 class="fw-bold m-0">
      <i class="fas fa-store text-primary"></i> ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏•‡∏Ç 00-99
    </h5>
  </div>
  <div class="text-end">
    <button class="btn btn-sm btn-primary mb-1" onclick="showPersonSummary()">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Ñ‡∏ô</button>
    <button class="btn btn-sm btn-dark mb-1" onclick="showSummary()">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î</button>
    <button class="btn btn-sm btn-outline-danger" onclick="clearData()">‡∏•‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà</button>
  </div>
</div>

<div class="row g-2 mb-3">
  <div class="col-6">
    <div class="stat-card">
      <small class="text-muted">‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏•‡∏Ç)</small>
      <div class="fw-bold text-primary" id="soldCount">0</div>
    </div>
  </div>
  <div class="col-6">
    <div class="stat-card">
      <small class="text-muted">‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡∏ö‡∏≤‡∏ó)</small>
      <div class="fw-bold text-success" id="moneyCount">0</div>
    </div>
  </div>
</div>

<input id="searchInput" class="form-control form-control-lg mb-3"
 placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç..." onkeyup="renderList()">

<div id="lottoList"></div>
</div>

<!-- modal ‡∏£‡∏≤‡∏¢‡∏Ñ‡∏ô -->
<div class="modal fade" id="personModal">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title fw-bold">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Ñ‡∏ô (‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢)</h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<select id="personSelect" class="form-select mb-2" onchange="renderPersonSummary()"></select>
<pre id="personSummaryText" class="p-3 bg-light rounded"></pre>
</div>
<div class="modal-footer">
<button class="btn btn-success w-100" onclick="copyPersonSummary()">‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏™‡πà‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
</div>
</div>
</div>
</div>

<!-- modal ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î -->
<div class="modal fade" id="summaryModal">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title fw-bold">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<pre id="summaryText" class="p-3 bg-light rounded"></pre>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
const PRICE = 50;
const BANK_INFO = `üè¶ ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏™‡∏¥‡∏ô
‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ 020-1-25404-630
‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ ‡∏ô‡∏±‡∏ô‡∏ó‡πå‡∏†‡∏™‡∏£ ‡∏Ç‡∏≠‡∏ö‡∏£‡∏π‡∏õ`;

let tickets=[];

function init(){
const saved=localStorage.getItem("myLottoShop");
if(saved) tickets=JSON.parse(saved);
else resetTickets();
renderList();
}

function resetTickets(){
tickets=[];
for(let i=0;i<100;i++){
tickets.push({
number:i.toString().padStart(2,"0"),
price:PRICE,
customer:"",
isPaid:false
});
}
save();
}

function renderList(){
const s=searchInput.value;
lottoList.innerHTML="";
let sold=0,money=0;

tickets.forEach((t,i)=>{
if(t.customer){
sold++;
if(t.isPaid) money+=PRICE;
}
if(!t.number.includes(s))return;

lottoList.innerHTML+=`
<div class="ticket-item ${t.customer?(t.isPaid?'status-paid':'status-pending'):'status-free'}">
<div class="d-flex justify-content-between mb-2">
<div><span class="lotto-num">${t.number}</span></div>
<span class="badge ${t.customer?(t.isPaid?'bg-success':'bg-warning text-dark'):'bg-secondary'}">
${t.customer?(t.isPaid?'‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß':'‡∏£‡∏≠‡πÇ‡∏≠‡∏ô'):'‡∏ß‡πà‡∏≤‡∏á'}
</span>
</div>
<div class="row g-2">
<div class="col-8">
<input class="form-control form-control-sm" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"
value="${t.customer}" onchange="updateCustomer(${i},this.value)">
</div>
<div class="col-4">
<button class="btn btn-sm w-100 ${t.isPaid?'btn-success':'btn-outline-secondary'}"
onclick="togglePaid(${i})" ${!t.customer?'disabled':''}>
${t.isPaid?'‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß':'‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô'}
</button>
</div>
</div>
</div>`;
});

soldCount.innerText=sold+"/100 ‡πÄ‡∏•‡∏Ç";
moneyCount.innerText=money.toLocaleString();
}

function updateCustomer(i,v){
tickets[i].customer=v;
if(!v) tickets[i].isPaid=false;
save();
}

function togglePaid(i){
tickets[i].isPaid=!tickets[i].isPaid;
save();
}

function save(){
localStorage.setItem("myLottoShop",JSON.stringify(tickets));
renderList();
}

function clearData(){
if(confirm("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")) resetTickets();
}

function showPersonSummary(){
const names=[...new Set(tickets.filter(t=>t.customer&&!t.isPaid).map(t=>t.customer))];
personSelect.innerHTML='<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</option>';
names.forEach(n=>personSelect.innerHTML+=`<option>${n}</option>`);
personSummaryText.innerText="";
new bootstrap.Modal(personModal).show();
}

function renderPersonSummary(){
const name=personSelect.value;
if(!name)return;
const items=tickets.filter(t=>t.customer===name&&!t.isPaid);
let txt=`üìå ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ñ‡∏∏‡∏ì ${name}\n\n‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠:\n`;
items.forEach(i=>txt+=`- ${i.number}\n`);
txt+=`\nüí∞ ‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏≠‡∏ô ${items.length*PRICE} ‡∏ö‡∏≤‡∏ó\n\n${BANK_INFO}`;
personSummaryText.innerText=txt;
}

function copyPersonSummary(){
navigator.clipboard.writeText(personSummaryText.innerText)
.then(()=>alert("‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"));
}

function showSummary(){
let sold=0,paid=0,pending=0,money=0;
tickets.forEach(t=>{
if(t.customer){
sold++;
if(t.isPaid){paid++;money+=PRICE;}
else pending++;
}
});

summaryText.innerText=
`üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

üéüÔ∏è ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß ${sold} ‡πÄ‡∏•‡∏Ç
üí∏ ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß ${paid} ‡πÄ‡∏•‡∏Ç
‚è≥ ‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢ ${pending} ‡πÄ‡∏•‡∏Ç
üí∞ ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß ${money.toLocaleString()} ‡∏ö‡∏≤‡∏ó
`;
new bootstrap.Modal(summaryModal).show();
}

init();
</script>
</body>
</html>
